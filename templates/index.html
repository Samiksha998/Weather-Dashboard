{% extends 'layout.html' %}

{% block content %}
  <div class="row">
    <div class="col-md-6 offset-md-3">
      <form method="post" class="mb-4">
        <div class="input-group">
          <input type="text" name="city" class="form-control" placeholder="Enter city" value="{{ city }}">
          <button class="btn btn-primary" type="submit">Search</button>
        </div>
      </form>

      {% if weather %}
        <div class="card mb-3">
          <div class="card-body">
            <h5 class="card-title">Current Weather in {{ weather.name }}, {{ weather.sys.country }}</h5>
            <p class="card-text">Temperature: <strong>{{ weather.main.temp }}°C</strong></p>
            <p class="card-text">Humidity: <strong>{{ weather.main.humidity }}%</strong></p>
            <p class="card-text">Conditions: <strong>{{ weather.weather[0].description }}</strong></p>
          </div>
        </div>
      {% endif %}

      {% if forecast %}
        <h5>Forecast</h5>
        <div class="list-group">
          {% for item in forecast %}
            <div class="list-group-item d-flex justify-content-between align-items-center">
              <div>
                <div><strong>{{ item.dt_txt }}</strong></div>
                <div>{{ item.weather }}</div>
              </div>
              <div class="text-end">
                <div>{{ item.temp }}°C</div>
                <div>Humidity: {{ item.humidity }}%</div>
              </div>
            </div>
          {% endfor %}
        </div>
      {% endif %}

      <div class="mt-4 text-muted small">
        Powered by OpenWeatherMap. Enter city names like "London" or "New York,US".
      </div>
    </div>
  </div>
{% endblock %}
